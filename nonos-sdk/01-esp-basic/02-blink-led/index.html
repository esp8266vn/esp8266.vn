<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Tuan PM">
  
  <title>Bật tắt LED - Internet Of Things (IoT) với ESP8266</title>
  

  <link rel="shortcut icon" href="../../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/highlight.css">

  <link rel="stylesheet" href="../../../css/custom.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Bật tắt LED";
    var mkdocs_page_input_path = "nonos-sdk/01-esp-basic/02-blink-led.md";
    var mkdocs_page_url = "/nonos-sdk/01-esp-basic/02-blink-led/";
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js"></script>
  <script src="../../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../../js/highlight.pack.js"></script>
  <script src="../../../js/theme.js"></script>
  <script src="../../../js/jquery.cookie-1.4.1.min.js"></script>
  <script src="../../../js/nav.js"></script> 

  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-60470603-4', 'esp8266.vn');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> Internet Of Things (IoT) với ESP8266</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li><ul class="subnav">
    <li class="">
        <a class="" href="../../.." id="Trang chủ" style="font-size:95%;font-weight:bold;">Trang chủ</a>
    </li>
    
    <li class="paddingtop20"></li>
</ul>
<li>
          
            <li><ul class="subnav">
    <li class="current">
        <a class="current"  id="Nội dung" style="font-size:95%;font-weight:bold;">Nội dung</a>
    </li>
    
        <li class="">
            <a style="padding-left:50px;" class=""  id="Kiến thức cơ bản" onclick="showChildren('Kiến thức cơ bản')">Kiến thức cơ bản  <i class="fa fa-arrow-circle-down" style="padding-left:5px;font-size:13px;"></i></a>
        </li>
        
        <div style="display:none" id="hidden_Kiến thức cơ bản">
        
            <li class="">
                <a style="padding-left:70px;" class="" href="../../../00-introduction/00-introduction/" id="Tổng quan">Tổng quan </a>
            </li>
            
            <div style="display:none" id="hidden_Kiến thức cơ bảnTổng quan">
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class="" href="../../../00-introduction/01-about-iot/" id="Internet Of Things (IoT)">Internet Of Things (IoT) </a>
            </li>
            
            <div style="display:none" id="hidden_Kiến thức cơ bảnTổng quanInternet Of Things (IoT)">
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class="" href="../../../00-introduction/02-about-esp8266/" id="ESP8266 & ESP8285">ESP8266 & ESP8285 </a>
            </li>
            
            <div style="display:none" id="hidden_Kiến thức cơ bảnTổng quanInternet Of Things (IoT)ESP8266 & ESP8285">
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class="" href="../../../00-introduction/03-esp-module/" id="Module & Board phát triển">Module & Board phát triển </a>
            </li>
            
            <div style="display:none" id="hidden_Kiến thức cơ bảnTổng quanInternet Of Things (IoT)ESP8266 & ESP8285Module & Board phát triển">
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class="" href="../../../00-introduction/04-prepare/" id="Phần cứng & công cụ">Phần cứng & công cụ </a>
            </li>
            
            <div style="display:none" id="hidden_Kiến thức cơ bảnTổng quanInternet Of Things (IoT)ESP8266 & ESP8285Module & Board phát triểnPhần cứng & công cụ">
            
            </div>
        
        </div>
    
        <li class="current">
            <a style="padding-left:50px;" class="current"  id="ESP8266 NONOS-SDK" onclick="showChildren('ESP8266 NONOS-SDK')">ESP8266 NONOS-SDK  <i class="fa fa-arrow-circle-down" style="padding-left:5px;font-size:13px;"></i></a>
        </li>
        
        <div style="display:none" id="hidden_ESP8266 NONOS-SDK">
        
            <li class="">
                <a style="padding-left:70px;" class="" href="../../nonos-sdk/" id="Giới thiệu">Giới thiệu </a>
            </li>
            
            <div style="display:none" id="hidden_ESP8266 NONOS-SDKGiới thiệu">
            
            </div>
        
            <li class="current">
                <a style="padding-left:70px;" class="current"  id="Cơ bản" onclick="showChildren('ESP8266 NONOS-SDKGiới thiệuCơ bản')">Cơ bản  <i class="fa fa-arrow-circle-down" style="padding-left:5px;font-size:13px;"></i></a>
            </li>
            
            <div style="display:none" id="hidden_ESP8266 NONOS-SDKGiới thiệuCơ bản">
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../00-esp-basic/" id="Cài đặt công cụ cần thiết">Cài đặt công cụ cần thiết </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../01-compile-first-time/" id="Biên dịch dự án mẫu">Biên dịch dự án mẫu </a>
                </li>
            
                <li class="current">
                    <a style="padding-left:90px;" class="current" href="./" id="Bật tắt LED">Bật tắt LED </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../03-button/" id="Nút nhấn">Nút nhấn </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../04-uart/" id="UART">UART </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../complex-makefile/" id="Makefile cho dự án phức tạp">Makefile cho dự án phức tạp </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../05-task/" id="Task">Task </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../06-wifi/" id="Wifi">Wifi </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../07-espconn/" id="ESPCONN">ESPCONN </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../08-mdns/" id="MDNS">MDNS </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../09-ntp/" id="NTP">NTP </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../10-save-to-flash/" id="Lưu dữ liệu vào Flash">Lưu dữ liệu vào Flash </a>
                </li>
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class=""  id="Smartconfig" onclick="showChildren('ESP8266 NONOS-SDKGiới thiệuCơ bảnSmartconfig')">Smartconfig  <i class="fa fa-arrow-circle-down" style="padding-left:5px;font-size:13px;"></i></a>
            </li>
            
            <div style="display:none" id="hidden_ESP8266 NONOS-SDKGiới thiệuCơ bảnSmartconfig">
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../02-esp-smartconfig/00-esp-smartconfig/" id="ESP8266 Smartconfig">ESP8266 Smartconfig </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../02-esp-smartconfig/01-why-smartconfig/" id="Tại sao cần Smartconfig">Tại sao cần Smartconfig </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../02-esp-smartconfig/02-esptouch/" id="ESPTOUCH & AIRKISS">ESPTOUCH & AIRKISS </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../02-esp-smartconfig/03-wps/" id="WPS">WPS </a>
                </li>
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class=""  id="MQTT" onclick="showChildren('ESP8266 NONOS-SDKGiới thiệuCơ bảnSmartconfigMQTT')">MQTT  <i class="fa fa-arrow-circle-down" style="padding-left:5px;font-size:13px;"></i></a>
            </li>
            
            <div style="display:none" id="hidden_ESP8266 NONOS-SDKGiới thiệuCơ bảnSmartconfigMQTT">
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../03-esp-mqtt/00-esp-mqtt/" id="ESP8266 MQTT">ESP8266 MQTT </a>
                </li>
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class=""  id="HTTP Client" onclick="showChildren('ESP8266 NONOS-SDKGiới thiệuCơ bảnSmartconfigMQTTHTTP Client')">HTTP Client  <i class="fa fa-arrow-circle-down" style="padding-left:5px;font-size:13px;"></i></a>
            </li>
            
            <div style="display:none" id="hidden_ESP8266 NONOS-SDKGiới thiệuCơ bảnSmartconfigMQTTHTTP Client">
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../04-esp-http-client/00-esp-http-client/" id="ESP8266 HTTP Client">ESP8266 HTTP Client </a>
                </li>
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class=""  id="HTTP Server" onclick="showChildren('ESP8266 NONOS-SDKGiới thiệuCơ bảnSmartconfigMQTTHTTP ClientHTTP Server')">HTTP Server  <i class="fa fa-arrow-circle-down" style="padding-left:5px;font-size:13px;"></i></a>
            </li>
            
            <div style="display:none" id="hidden_ESP8266 NONOS-SDKGiới thiệuCơ bảnSmartconfigMQTTHTTP ClientHTTP Server">
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../05-esp-http-server/00-esp-http-server/" id="ESP8266 HTTP Server">ESP8266 HTTP Server </a>
                </li>
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class=""  id="Firmware Over The Air" onclick="showChildren('ESP8266 NONOS-SDKGiới thiệuCơ bảnSmartconfigMQTTHTTP ClientHTTP ServerFirmware Over The Air')">Firmware Over The Air  <i class="fa fa-arrow-circle-down" style="padding-left:5px;font-size:13px;"></i></a>
            </li>
            
            <div style="display:none" id="hidden_ESP8266 NONOS-SDKGiới thiệuCơ bảnSmartconfigMQTTHTTP ClientHTTP ServerFirmware Over The Air">
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../06-esp-fota/00-esp-fota/" id="FOTA">FOTA </a>
                </li>
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class=""  id="ESP Now" onclick="showChildren('ESP8266 NONOS-SDKGiới thiệuCơ bảnSmartconfigMQTTHTTP ClientHTTP ServerFirmware Over The AirESP Now')">ESP Now  <i class="fa fa-arrow-circle-down" style="padding-left:5px;font-size:13px;"></i></a>
            </li>
            
            <div style="display:none" id="hidden_ESP8266 NONOS-SDKGiới thiệuCơ bảnSmartconfigMQTTHTTP ClientHTTP ServerFirmware Over The AirESP Now">
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../07-esp-now/00-esp-now/" id="ESP Now">ESP Now </a>
                </li>
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class=""  id="ESP Mesh" onclick="showChildren('ESP8266 NONOS-SDKGiới thiệuCơ bảnSmartconfigMQTTHTTP ClientHTTP ServerFirmware Over The AirESP NowESP Mesh')">ESP Mesh  <i class="fa fa-arrow-circle-down" style="padding-left:5px;font-size:13px;"></i></a>
            </li>
            
            <div style="display:none" id="hidden_ESP8266 NONOS-SDKGiới thiệuCơ bảnSmartconfigMQTTHTTP ClientHTTP ServerFirmware Over The AirESP NowESP Mesh">
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../08-esp-mesh/00-esp-mesh/" id="ESP Mesh">ESP Mesh </a>
                </li>
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class=""  id="Các dự án" onclick="showChildren('ESP8266 NONOS-SDKGiới thiệuCơ bảnSmartconfigMQTTHTTP ClientHTTP ServerFirmware Over The AirESP NowESP MeshCác dự án')">Các dự án  <i class="fa fa-arrow-circle-down" style="padding-left:5px;font-size:13px;"></i></a>
            </li>
            
            <div style="display:none" id="hidden_ESP8266 NONOS-SDKGiới thiệuCơ bảnSmartconfigMQTTHTTP ClientHTTP ServerFirmware Over The AirESP NowESP MeshCác dự án">
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../09-esp-projects/00-project-list/" id="Danh sách">Danh sách </a>
                </li>
            
            </div>
        
        </div>
    
        <li class="">
            <a style="padding-left:50px;" class=""  id="ESP8266 FreeRTOS-SDK" onclick="showChildren('ESP8266 FreeRTOS-SDK')">ESP8266 FreeRTOS-SDK  <i class="fa fa-arrow-circle-down" style="padding-left:5px;font-size:13px;"></i></a>
        </li>
        
        <div style="display:none" id="hidden_ESP8266 FreeRTOS-SDK">
        
            <li class="">
                <a style="padding-left:70px;" class="" href="../../../freertos-sdk/freertos-sdk/" id="Giới thiệu">Giới thiệu </a>
            </li>
            
            <div style="display:none" id="hidden_ESP8266 FreeRTOS-SDKGiới thiệu">
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class=""  id="Cơ bản" onclick="showChildren('ESP8266 FreeRTOS-SDKGiới thiệuCơ bản')">Cơ bản  <i class="fa fa-arrow-circle-down" style="padding-left:5px;font-size:13px;"></i></a>
            </li>
            
            <div style="display:none" id="hidden_ESP8266 FreeRTOS-SDKGiới thiệuCơ bản">
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../../freertos-sdk/00-freertos-basic/00-basic/" id="Cài đặt công cụ cần thiết">Cài đặt công cụ cần thiết </a>
                </li>
            
            </div>
        
        </div>
    
        <li class="">
            <a style="padding-left:50px;" class=""  id="ESP8266 Arduino" onclick="showChildren('ESP8266 Arduino')">ESP8266 Arduino  <i class="fa fa-arrow-circle-down" style="padding-left:5px;font-size:13px;"></i></a>
        </li>
        
        <div style="display:none" id="hidden_ESP8266 Arduino">
        
            <li class="">
                <a style="padding-left:70px;" class="" href="../../../arduino/arduino/" id="Giới thiệu">Giới thiệu </a>
            </li>
            
            <div style="display:none" id="hidden_ESP8266 ArduinoGiới thiệu">
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class=""  id="Cơ bản" onclick="showChildren('ESP8266 ArduinoGiới thiệuCơ bản')">Cơ bản  <i class="fa fa-arrow-circle-down" style="padding-left:5px;font-size:13px;"></i></a>
            </li>
            
            <div style="display:none" id="hidden_ESP8266 ArduinoGiới thiệuCơ bản">
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../../arduino/00-arduino-basic/00-basic/" id="Cài đặt">Cài đặt </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../../arduino/00-arduino-basic/digital/" id="Digital">Digital </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../../arduino/00-arduino-basic/analog/" id="Analog">Analog </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../../arduino/00-arduino-basic/timming-delay/" id="Thời gian & Delay">Thời gian & Delay </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../../arduino/00-arduino-basic/serial/" id="Serial">Serial </a>
                </li>
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../../arduino/00-arduino-basic/progmem/" id="Progmem">Progmem </a>
                </li>
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class="" href="../../../arduino/arduino-fota/" id="Cập nhật Firmware (FOTA)">Cập nhật Firmware (FOTA) </a>
            </li>
            
            <div style="display:none" id="hidden_ESP8266 ArduinoGiới thiệuCơ bảnCập nhật Firmware (FOTA)">
            
            </div>
        
        </div>
    
        <li class="">
            <a style="padding-left:50px;" class=""  id="ESP8266 Micropython" onclick="showChildren('ESP8266 Micropython')">ESP8266 Micropython  <i class="fa fa-arrow-circle-down" style="padding-left:5px;font-size:13px;"></i></a>
        </li>
        
        <div style="display:none" id="hidden_ESP8266 Micropython">
        
            <li class="">
                <a style="padding-left:70px;" class="" href="../../../micropython/micropython/" id="Giới thiệu">Giới thiệu </a>
            </li>
            
            <div style="display:none" id="hidden_ESP8266 MicropythonGiới thiệu">
            
            </div>
        
            <li class="">
                <a style="padding-left:70px;" class=""  id="Cơ bản" onclick="showChildren('ESP8266 MicropythonGiới thiệuCơ bản')">Cơ bản  <i class="fa fa-arrow-circle-down" style="padding-left:5px;font-size:13px;"></i></a>
            </li>
            
            <div style="display:none" id="hidden_ESP8266 MicropythonGiới thiệuCơ bản">
            
                <li class="">
                    <a style="padding-left:90px;" class="" href="../../../micropython/00-ucpython-basic/00-basic/" id="Cài đặt công cụ cần thiết">Cài đặt công cụ cần thiết </a>
                </li>
            
            </div>
        
        </div>
    
    <li class="paddingtop20"></li>
</ul>
<li>
          
            <li><ul class="subnav">
    <li class="">
        <a class="" href="../../../projects/project-list/" id="Các dự án" style="font-size:95%;font-weight:bold;">Các dự án</a>
    </li>
    
    <li class="paddingtop20"></li>
</ul>
<li>
          
            <li><ul class="subnav">
    <li class="">
        <a class="" href="../../../license/" id="Bản quyền" style="font-size:95%;font-weight:bold;">Bản quyền</a>
    </li>
    
    <li class="paddingtop20"></li>
</ul>
<li>
          
            <li><ul class="subnav">
    <li class="">
        <a class="" href="../../../contributor/" id="Đóng góp" style="font-size:95%;font-weight:bold;">Đóng góp</a>
    </li>
    
    <li class="paddingtop20"></li>
</ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">Internet Of Things (IoT) với ESP8266</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
        
          <li>ESP8266 NONOS-SDK &raquo;</li>
        
      
        
          <li>Cơ bản &raquo;</li>
        
      
    
    <li>Bật tắt LED</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/esp8266vn/esp8266.vn" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="bat-tat-led">Bật tắt LED<a class="headerlink" href="#bat-tat-led" title="Permanent link">#</a></h1>
<p>Tổ chức file căn cứ theo bài <a href="../01-compile-first-time/">Biên dịch dự án đầu tiên</a>, toàn bộ cấu trúc file, <strong>Makefile, user_config.h, rf_init.c</strong> giữ nguyên, chỉ thay đổi nội dung file <code>main.c</code>. </p>
<div class="admonition note">
<p class="admonition-title">Nội dung</p>
<p>Chớp tắt đèn LED mỗi 1 giây</p>
</div>
<h2 id="lay-du-an-ve-tu-github">Lấy dự án về từ Github:<a class="headerlink" href="#lay-du-an-ve-tu-github" title="Permanent link">#</a></h2>
<pre class="code"><code class="language-bash">git clone https://github.com/esp8266vn/esp-iot-led-blink.git
cd esp-iot-led-blink &amp;&amp; make</code></pre>


<h2 id="so-o-file">Sơ đồ file<a class="headerlink" href="#so-o-file" title="Permanent link">#</a></h2>
<pre class="code"><code>esp-iot-led-blink
    |-- Makefile
    |-- main.c
    |-- rf_init.c
    `-- user_config.h</code></pre>


<h2 id="ma-nguon">Mã nguồn<a class="headerlink" href="#ma-nguon" title="Permanent link">#</a></h2>
<pre class="code"><code class="language-c">//esp-led/main.c
#include &lt;stdio.h&gt;
#include &quot;osapi.h&quot;
#include &quot;user_interface.h&quot;
static os_timer_t led_timer;
static int led_value = 0;
void led_service_cb(void *args) //Hàm này sẽ được gọi khi soft timer `led_timer` hoàn thành việc đếm 
{
    led_value ^= 0x01;
    //Ghi giá trị ra LED IO, `led_value` khi thực hiện **XOR** với 1 sẽ đảo giá trị giữa 1 và 0
    WRITE_PERI_REG(RTC_GPIO_OUT, (READ_PERI_REG(RTC_GPIO_OUT) &amp; (uint32_t)0xfffffffe)| (uint32_t)(led_value &amp; 1)); 
    os_printf(&quot;Blink\r\n&quot;);
}
void app_init()
{
    //Cấu hình ngõ ra UART 115200 baud
    uart_div_modify(0, UART_CLK_FREQ / 115200); 

    //Cấu hình chân LED là chức năng chính GPIO, ngõ ra 
    WRITE_PERI_REG(PAD_XPD_DCDC_CONF, (READ_PERI_REG(PAD_XPD_DCDC_CONF) &amp; 0xffffffbc)| (uint32_t)0x1);  
    WRITE_PERI_REG(RTC_GPIO_CONF, (READ_PERI_REG(RTC_GPIO_CONF) &amp; (uint32_t)0xfffffffe)| (uint32_t)0x0); 
    WRITE_PERI_REG(RTC_GPIO_ENABLE, (READ_PERI_REG(RTC_GPIO_ENABLE) &amp; (uint32_t)0xfffffffe)| (uint32_t)0x1); 

    //Cấu hình địa chỉ hàm gọi khi timer `led_timer` đếm xong 
    os_timer_setfn(&amp;led_timer, (os_timer_func_t *)led_service_cb, NULL); 

    //Cấu hình `led_timer` tới hạn trong 1000 mili giây và khởi động lại khi tới hạn
    os_timer_arm(&amp;led_timer, 1000, 1); 
}

void user_init(void)
{
    system_init_done_cb(app_init);
}</code></pre>


<p>Ở phần này chúng ta sẽ biết thêm về cách thức đọc/ghi thanh ghi của ESP8266, đồng thời sử dụng Software Timer:</p>
<ul>
<li>Để ghi vào thanh ghi, chúng ta dùng định nghĩa: <code>WRITE_PERI_REG</code> với tham số đầu tiên là địa chỉ thanh ghi, thông số thứ 2 là giá trị. Tương tự với việc đọc, định nghĩa <code>READ_PERI_REG</code> chỉ cần 1 tham số là địa chỉ thanh ghi, và trả về giá trị của thanh ghi.</li>
<li>Trước khi sử dụng Software Timer, cần định nghĩa trước biến chưa thông tin là <code>os_timer_t led_timer</code>, khởi tạo hàm sẽ gọi khi Timer đến tới hạn với <code>os_timer_setfn</code> và <code>os_timer_arm</code> với tham số thứ 3 = 1 đảm bảo sẽ lặp lại việc đếm liên tục.</li>
</ul>
<h2 id="goi-y">Gợi ý<a class="headerlink" href="#goi-y" title="Permanent link">#</a></h2>
<p>Có thể tìm thấy định nghĩa các địa chỉ thanh ghi tại thư mục chứa SDK <code>$SDK_BASE\include\eagle_soc.h</code>. Ngoài ra, bạn có thể tham khảo việc cấu hình GPIO16 tại <code>$SDK_BASE\driver_lib\gpio16.c</code> </p>
<h2 id="canh-bao">Cảnh báo<a class="headerlink" href="#canh-bao" title="Permanent link">#</a></h2>
<p>Chân <code>GPIO16</code> của ESP8266 là chân khá đặc biệt, sử dụng chung với RTC OUTPUT, dùng ở chế độ DEEPSLEEP, khi RTC tới hạn và khởi động Chip bằng cách hạ mức thấp chân này. Nếu bạn thiết kế ứng dụng cần sử dụng chế độ ngủ DEEPSLEEP thì đừng sử dụng chân GPIO16 cho mục đích khác, ngoại trừ việc nối thẳng vào chân nRST (chân <strong>32</strong> của ESP8266)</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../03-button/" class="btn btn-neutral float-right" title="Nút nhấn">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../01-compile-first-time/" class="btn btn-neutral" title="Biên dịch dự án mẫu"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2016 <a href="https://esp8266.vn">ESP8266 Viet Nam</a></p>
    
  </div>

  
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<!-- <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/esp8266vn/esp8266.vn" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../01-compile-first-time/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../03-button/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div> -->

<script type="text/javascript">
  // If cookie is defined toggle the id
  if (typeof $.cookie('docToggle') !== 'undefined') {
      // Parse cookie which is an array
      var _parsed_cookie = JSON.parse($.cookie('docToggle'));
      // Loop over array and show hidden divs
      $.each(_parsed_cookie, function(index, value) {
          // Toggle
          $("[id='hidden_" + value + "']").css('display','');
      })
  }
</script>

</body>
</html>